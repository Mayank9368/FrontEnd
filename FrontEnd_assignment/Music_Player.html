<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Custom Music Player</title>
<style>
body{
  margin:0;
  background:#0f1724;
  color:#e6eef8;
  font-family:sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.player{
  width:360px;
  background:#161e2f;
  padding:20px;
  border-radius:16px;
  box-shadow:0 0 20px rgba(0,0,0,0.4);
  display:flex;
  flex-direction:column;
  gap:14px;
}
.title{
  font-size:20px;
  font-weight:700;
}
.list{
  max-height:180px;
  overflow:auto;
  background:#0f1724;
  border-radius:10px;
  padding:8px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.item{
  background:#1b2539;
  padding:10px;
  border-radius:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
}
.item.active{
  background:#3b82f6;
  color:#061226;
}
.controls{
  display:flex;
  justify-content:center;
  gap:20px;
}
.btn{
  padding:10px 14px;
  border-radius:10px;
  background:#3b82f6;
  border:0;
  cursor:pointer;
  font-weight:600;
  color:#061226;
}
.range{
  width:100%;
}
.time{
  display:flex;
  justify-content:space-between;
  font-size:12px;
  color:#94a3b8;
}
.addbox{
  display:flex;
  gap:8px;
}
.input{
  flex:1;
  padding:8px;
  border-radius:8px;
  border:0;
}
.rem{
  background:#ef4444;
  padding:6px 10px;
  border:0;
  border-radius:6px;
  color:white;
  cursor:pointer;
}
</style>
</head>
<body>

<div class="player">

  <div class="title">Custom Music Player</div>

  <audio id="audio"></audio>

  <input type="range" id="seek" class="range" min="0" value="0">

  <div class="time">
    <span id="current">0:00</span>
    <span id="duration">0:00</span>
  </div>

  <div class="controls">
    <button id="playBtn" class="btn">Play</button>
    <button id="pauseBtn" class="btn">Pause</button>
  </div>

  <div class="addbox">
    <input id="name" class="input" placeholder="Song name">
    <input type="file" id="file" accept="audio/*">
    <button id="add" class="btn" style="padding:8px 10px">Add</button>
  </div>

  <div id="playlist" class="list"></div>

</div>

<script>
let playlist = []
let currentIndex = -1
const audio = document.getElementById("audio")
const playlistBox = document.getElementById("playlist")
const seek = document.getElementById("seek")
const current = document.getElementById("current")
const duration = document.getElementById("duration")
const playBtn = document.getElementById("playBtn")
const pauseBtn = document.getElementById("pauseBtn")

function formatTime(t){
  const m = Math.floor(t/60)
  const s = Math.floor(t%60).toString().padStart(2,'0')
  return m+":"+s
}

function loadSong(i){
  currentIndex = i
  audio.src = playlist[i].url
  updateUI()
  audio.play()
}

function updateUI(){
  Array.from(playlistBox.children).forEach((c,idx)=>{
    c.classList.toggle("active", idx === currentIndex)
  })
}

function render(){
  playlistBox.innerHTML=""
  playlist.forEach((s,i)=>{
    const div=document.createElement("div")
    div.className="item"+(i===currentIndex?" active":"")
    div.innerHTML = `<span>${s.name}</span><button class="rem">X</button>`
    div.onclick=e=>{
      if(e.target.classList.contains("rem")){
        playlist.splice(i,1)
        if(i===currentIndex) audio.pause()
        currentIndex=-1
        render()
      } else loadSong(i)
    }
    playlistBox.appendChild(div)
  })
}

document.getElementById("add").onclick=()=>{
  const f=document.getElementById("file").files[0]
  const name=document.getElementById("name").value.trim()
  if(!f||!name) return
  const url=URL.createObjectURL(f)
  playlist.push({name,url})
  document.getElementById("name").value=""
  render()
}

playBtn.onclick=()=>audio.play()
pauseBtn.onclick=()=>audio.pause()

audio.ontimeupdate=()=>{
  seek.max = audio.duration || 0
  seek.value = audio.currentTime
  current.textContent = formatTime(audio.currentTime)
  duration.textContent = formatTime(audio.duration || 0)
}

seek.oninput=()=>{
  audio.currentTime = seek.value
}

audio.onended=()=>{
  if(currentIndex < playlist.length-1){
    loadSong(currentIndex+1)
  }
}

render()
</script>

</body>
</html>
